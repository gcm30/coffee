(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-478d4268"],{"159b":function(t,a,e){var i=e("da84"),s=e("fdbc"),o=e("17c2"),r=e("9112");for(var n in s){var c=i[n],d=c&&c.prototype;if(d&&d.forEach!==o)try{r(d,"forEach",o)}catch(l){d.forEach=o}}},"17c2":function(t,a,e){"use strict";var i=e("b727").forEach,s=e("a640"),o=s("forEach");t.exports=o?[].forEach:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}},"1c4c":function(t,a,e){},"30c7":function(t,a,e){"use strict";var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"bg"},[e("div",{staticClass:"bg-box"}),e("div",{staticClass:"bg-content"},[t._t("default")],2)])},s=[],o={name:"Bg"},r=o,n=(e("fadd"),e("2877")),c=Object(n["a"])(r,i,s,!1,null,"41be0940",null);a["a"]=c.exports},"5bbb":function(t,a,e){"use strict";var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"pro-list"},[e("van-swipe-cell",{attrs:{disabled:!t.isSlide},scopedSlots:t._u([{key:"right",fn:function(){return[e("van-button",{attrs:{square:"",type:"danger",text:"删除"},on:{click:t.remove}})]},proxy:!0}])},[e("div",{staticClass:"pro-info"},[t.isHasCheckbox?e("div",{staticClass:"pro-checkbox"},[e("van-checkbox",{attrs:{"checked-color":"#eb2403"},on:{change:function(a){return t.simpleSelect(t.proData.checked)}},model:{value:t.proData.checked,callback:function(a){t.$set(t.proData,"checked",a)},expression:"proData.checked"}})],1):t._e(),e("div",{staticClass:"pro-img"},[e("img",{staticClass:"auto-img",attrs:{src:t.proData.small_img,alt:""}})]),e("div",{staticClass:"pro-box"},[e("div",{staticClass:"pro-name"},[e("div",{staticClass:"pro-t1"},[e("div",{staticClass:"pro-zhname"},[t._v(t._s(t.proData.name))]),e("div",{staticClass:"pro-rule"},[t._v(t._s(t.proData.rule))])]),e("div",{staticClass:"pro-enname"},[t._v(t._s(t.proData.enname))])]),e("div",{staticClass:"pro-price"},[e("div",{staticClass:"p-price"},[t._v("¥"+t._s(t.proData.price))]),e("div",{staticClass:"p-count"},[t._t("default")],2)])])])])],1)},s=[],o={name:"ProList",props:{proData:{type:Object,default:function(){return{}}},isSlide:{type:Boolean,default:!1},isHasCheckbox:{type:Boolean,default:!0}},data:function(){return{checked:!0}},methods:{simpleSelect:function(){this.$emit("simpleSelect")},remove:function(){this.$emit("remove")}}},r=o,n=(e("f273"),e("2877")),c=Object(n["a"])(r,i,s,!1,null,"33db6c7e",null);a["a"]=c.exports},a434:function(t,a,e){"use strict";var i=e("23e7"),s=e("23cb"),o=e("a691"),r=e("50c4"),n=e("7b0b"),c=e("65f0"),d=e("8418"),l=e("1dde"),u=l("splice"),f=Math.max,v=Math.min,h=9007199254740991,p="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!u},{splice:function(t,a){var e,i,l,u,m,b,g=n(this),C=r(g.length),x=s(t,C),_=arguments.length;if(0===_?e=i=0:1===_?(e=0,i=C-x):(e=_-2,i=v(f(o(a),0),C-x)),C+e-i>h)throw TypeError(p);for(l=c(g,i),u=0;u<i;u++)m=x+u,m in g&&d(l,u,g[m]);if(l.length=i,e<i){for(u=x;u<C-i;u++)m=u+i,b=u+e,m in g?g[b]=g[m]:delete g[b];for(u=C;u>C-i+e;u--)delete g[u-1]}else if(e>i)for(u=C-i;u>x;u--)m=u+i-1,b=u+e-1,m in g?g[b]=g[m]:delete g[b];for(u=0;u<e;u++)g[u+x]=arguments[u+2];return g.length=C-i+e,l}})},a640:function(t,a,e){"use strict";var i=e("d039");t.exports=function(t,a){var e=[][t];return!!e&&i((function(){e.call(null,a||function(){throw 1},1)}))}},a748:function(t,a,e){},be7a:function(t,a,e){},cf2a:function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"order"},[e("van-nav-bar",{attrs:{title:"我的订单","left-text":"返回","left-arrow":"",fixed:""},on:{"click-left":t.back}}),e("Bg",[e("div",{staticClass:"tab-box"},[e("van-tabs",{attrs:{color:"#eb2403","line-height":"2px","title-active-color":"#eb2403",animated:"",duration:"0.35",sticky:"","offset-top":"46px"},on:{change:t.changeOrderStatus},model:{value:t.tabIndex,callback:function(a){t.tabIndex=a},expression:"tabIndex"}},t._l(t.tabData,(function(a,i){return e("van-tab",{key:i,attrs:{title:a.title}},[e("div",{staticClass:"tab-content"},[t.orderData.length>0?e("div",t._l(t.orderData,(function(a,i){return e("div",{key:i,staticClass:"order-content"},[e("div",{staticClass:"o-title"},[e("div",{staticClass:"o-num"},[t._v(t._s(a.orderId))]),e("div",{staticClass:"o-status"},[2===a.status?e("div",{staticClass:"o-finished"},[e("div",[t._v("已完成")]),e("div",{staticClass:"o-remove",on:{click:function(e){return t.removeOrder(a.orderId,i)}}},[e("van-icon",{attrs:{name:"delete-o"}})],1)]):e("div",{on:{click:function(e){return t.receive(a)}}},[t._v("确认收货")])])]),e("div",t._l(a.data,(function(a,i){return e("div",{key:i,staticClass:"o-pro-item"},[e("ProList",{staticClass:"not-padding",attrs:{isHasCheckbox:!1,proData:a}},[e("div",{staticClass:"o-count"},[t._v("x"+t._s(a.count))])])],1)})),0),e("div",{staticClass:"o-bottom"},[e("div",{staticClass:"empty-round"},[e("div",{staticClass:"round-box left-r"}),e("div",{staticClass:"round-box right-r"})]),e("div",{staticClass:"o-date"},[t._v(" "+t._s(t._f("formatDate")(a.date,"yyyy-MM-dd hh:mm:ss"))+" ")]),e("div",{staticClass:"o-count-price"},[e("div",{staticClass:"o-c1"},[t._v("共计 "+t._s(a.total)+" 件")]),e("div",{staticClass:"o-c2"},[t._v("总价: "),e("span",[t._v("¥"+t._s(a.money))])])])])])})),0):e("div",[e("van-empty",{attrs:{description:"没有订单数据！"}})],1)])])})),1)],1)])],1)},s=[],o=(e("159b"),e("a434"),e("be7a"),e("30c7")),r=e("5bbb"),n={name:"Order",components:{Bg:o["a"],ProList:r["a"]},data:function(){return{tabIndex:0,tabData:[{title:"全部"},{title:"进行中"},{title:"已完成"}],orderData:[]}},created:function(){this.getUserOrderData(this.tabIndex)},methods:{back:function(){this.$router.go(-1)},getUserOrderData:function(t){var a=this,e=this.$cookies.get("TOKEN");this.axios({method:"GET",url:"/findOrder",params:{tokenString:e,status:t}}).then((function(t){if(700==t.data.code)return a.$toast("请先登录"),void setTimeout((function(){a.$router.push({name:"Login"})}),2e3);if(7e4===t.data.code){var e=[];t.data.result.forEach((function(t){t.small_img=t.smallImg,delete t.smallImg,-1===e.indexOf(t.oid)&&e.push(t.oid)}));var i=[];e.forEach((function(a){var e={orderId:a,date:"",total:0,money:0,status:-1,data:[]};t.data.result.forEach((function(t){a===t.oid&&(e.date||(e.date=t.createdAt),-1===e.status&&(e.status=t.status),e.total+=t.count,e.money+=t.count*t.price,e.data.push(t))})),i.push(e)})),a.orderData=i}})).catch((function(t){}))},changeOrderStatus:function(){this.getUserOrderData(this.tabIndex)},receive:function(t){var a=this;this.$dialog.confirm({title:"提示",message:"是否确认收货？"}).then((function(){var e=a.$cookies.get("TOKEN");a.axios({method:"POST",url:"/receive",data:{tokenString:e,oid:t.orderId}}).then((function(e){if(700==e.data.code)return a.$toast("请先登录"),void setTimeout((function(){a.$router.push({name:"Login"})}),2e3);if(a.$toast(e.data.msg),8e4===e.data.code&&(t.status=2,1===a.tabIndex))for(var i=0;i<a.orderData.length;i++)if(t.oid===a.orderData.orderId)return void a.orderData.splice(i,1)})).catch((function(t){}))}))},removeOrder:function(t,a){var e=this;this.$dialog.confirm({title:"提示",message:"是否确认删除？"}).then((function(){var i=e.$cookies.get("TOKEN");e.axios({method:"POST",url:"/removeOrder",data:{tokenString:i,oid:t}}).then((function(t){if(700==t.data.code)return e.$toast("请先登录"),void setTimeout((function(){e.$router.push({name:"Login"})}),2e3);e.$toast(t.data.msg),9e4===t.data.code&&e.orderData.splice(a,1)})).catch((function(t){}))}))}}},c=n,d=(e("e314"),e("2877")),l=Object(d["a"])(c,i,s,!1,null,"419b1431",null);a["default"]=l.exports},dca0:function(t,a,e){},e314:function(t,a,e){"use strict";e("dca0")},f273:function(t,a,e){"use strict";e("a748")},fadd:function(t,a,e){"use strict";e("1c4c")}}]);
//# sourceMappingURL=chunk-478d4268.235d7937.js.map