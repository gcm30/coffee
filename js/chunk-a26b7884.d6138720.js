(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a26b7884"],{1276:function(t,e,a){"use strict";var s=a("d784"),i=a("44e7"),n=a("825a"),o=a("1d80"),r=a("4840"),c=a("8aa5"),u=a("50c4"),l=a("14c3"),d=a("9263"),g=a("9f7f"),h=g.UNSUPPORTED_Y,f=[].push,m=Math.min,v=4294967295;s("split",2,(function(t,e,a){var s;return s="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,a){var s=String(o(this)),n=void 0===a?v:a>>>0;if(0===n)return[];if(void 0===t)return[s];if(!i(t))return e.call(s,t,n);var r,c,u,l=[],g=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),h=0,m=new RegExp(t.source,g+"g");while(r=d.call(m,s)){if(c=m.lastIndex,c>h&&(l.push(s.slice(h,r.index)),r.length>1&&r.index<s.length&&f.apply(l,r.slice(1)),u=r[0].length,h=c,l.length>=n))break;m.lastIndex===r.index&&m.lastIndex++}return h===s.length?!u&&m.test("")||l.push(""):l.push(s.slice(h)),l.length>n?l.slice(0,n):l}:"0".split(void 0,0).length?function(t,a){return void 0===t&&0===a?[]:e.call(this,t,a)}:e,[function(e,a){var i=o(this),n=void 0==e?void 0:e[t];return void 0!==n?n.call(e,i,a):s.call(String(i),e,a)},function(t,i){var o=a(s,t,this,i,s!==e);if(o.done)return o.value;var d=n(t),g=String(this),f=r(d,RegExp),p=d.unicode,I=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(h?"g":"y"),k=new f(h?"^(?:"+d.source+")":d,I),C=void 0===i?v:i>>>0;if(0===C)return[];if(0===g.length)return null===l(k,g)?[g]:[];var $=0,y=0,b=[];while(y<g.length){k.lastIndex=h?0:y;var x,S=l(k,h?g.slice(y):g);if(null===S||(x=m(u(k.lastIndex+(h?y:0)),g.length))===$)y=c(g,y,p);else{if(b.push(g.slice($,y)),b.length===C)return b;for(var w=1;w<=S.length-1;w++)if(b.push(S[w]),b.length===C)return b;y=$=x}}return b.push(g.slice($)),b}]}),h)},"4c41":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"my"},[a("div",{staticClass:"my-bg",style:{backgroundImage:"url("+t.userInfo.userBg+")"}},[a("van-uploader",{staticClass:"uploader-box",attrs:{"after-read":t.uploadBg}})],1),a("div",{staticClass:"user-box"},[a("div",{staticClass:"user-info"},[a("div",{staticClass:"user-img",style:{backgroundImage:"url("+t.Img+")"}}),a("div",{staticClass:"my-msg"},[a("div",{staticClass:"my-name"},[t._v(t._s(t.Nick))]),a("div",{staticClass:"my-disc"},[t._v(t._s(t.Desc))])])]),a("div",{staticClass:"my-list"},[a("div",{staticClass:"item",on:{click:function(e){return t.toData()}}},[a("div",{staticClass:"item-title"},[t._v("个人资料")]),a("van-icon",{attrs:{name:"arrow"}})],1),a("div",{staticClass:"item",on:{click:t.toOrder}},[a("div",{staticClass:"item-title"},[t._v("我的订单")]),a("van-icon",{attrs:{name:"arrow"}})],1),a("div",{staticClass:"item",on:{click:t.toShouCang}},[a("div",{staticClass:"item-title"},[t._v("我的收藏")]),a("van-icon",{attrs:{name:"arrow"}})],1),a("div",{staticClass:"item",on:{click:t.toAddress}},[a("div",{staticClass:"item-title"},[t._v("地址管理")]),a("van-icon",{attrs:{name:"arrow"}})],1),a("div",{staticClass:"item",on:{click:t.toSafety}},[a("div",{staticClass:"item-title"},[t._v("安全中心")]),a("van-icon",{attrs:{name:"arrow"}})],1),a("h3")])])])},i=[],n=(a("ac1f"),a("5319"),a("1276"),{name:"My",data:function(){return{userInfo:{},userImage:{},AccountData:{}}},created:function(){this.getUserInfo(),this.findAccountInfo()},computed:{Nick:function(){return this.$store.state.Nick},Desc:function(){return this.$store.state.Desc},Img:function(){return this.$store.state.Img}},methods:{toData:function(){this.$router.push({name:"PersonalData"})},toOrder:function(){this.$router.push({name:"Order"})},toAddress:function(){this.$router.push({name:"Address"})},toShouCang:function(){this.$router.push({name:"ShouCang"})},toSafety:function(){this.$router.push({name:"Safety"})},findAccountInfo:function(){var t=this,e=this.$cookies.get("TOKEN");this.axios({method:"GET",url:"/findAccountInfo",params:{tokenString:e}}).then((function(e){if(700==e.data.code)return t.$toast("请先登录"),void setTimeout((function(){t.$router.push({name:"Login"})}),2e3);"B001"==e.data.code&&(t.AccountData.userImg=e.data.result[0].userImg,t.AccountData.nickName=e.data.result[0].nickName),console.log(e.data.result[0].userImg)})).catch((function(t){console.log(t)}))},uploadBg:function(t){var e=this,a=t.content.replace(/^data:image\/[A-Za-z]+;base64,/,""),s=this.$cookies.get("TOKEN");this.axios({method:"POST",url:"/updateUserBg",data:{tokenString:s,serverBase64Img:a,imgType:t.file.type.split(/\//)[1]}}).then((function(t){if(console.log("updateUserBg ===>",t),700==t.data.code)return e.$toast("请先登录"),void setTimeout((function(){e.$router.push({name:"Login"})}),2e3);e.$toast(t.data.msg),"I001"===t.data.code&&1===t.data.result[0]&&(e.userInfo.userBg=t.data.userBg)})).catch((function(t){console.log(t)}))},updateImg:function(t){var e=this,a=t.content.replace(/^data:image\/[A-Za-z]+;base64,/,""),s=this.$cookies.get("TOKEN");this.axios({method:"POST",url:"/updateAvatar",data:{tokenString:s,serverBase64Img:a,imgType:t.file.type.split(/\//)[1]}}).then((function(t){if(console.log("updateAvatar ===>",t),700==t.data.code)return e.$toast("请先登录"),void setTimeout((function(){e.$router.push({name:"Login"})}),2e3);e.$toast(t.data.msg),"H001"===t.data.code&&1===t.data.result[0]&&(e.userImage.userImg=t.data.userImg)})).catch((function(t){console.log(t)}))},getUserInfo:function(){var t=this,e=this.$cookies.get("TOKEN");this.axios({method:"GET",url:"/findMy",params:{tokenString:e}}).then((function(e){if(700==e.data.code)return t.$toast("请先登录"),void setTimeout((function(){t.$router.push({name:"Login"})}),2e3);"A001"===e.data.code&&(t.userInfo=e.data.result[0],t.userImage=e.data.result[0])})).catch((function(t){console.log(t)}))}}}),o=n,r=(a("51f5"),a("2877")),c=Object(r["a"])(o,s,i,!1,null,"3d1523ca",null);e["default"]=c.exports},"51f5":function(t,e,a){"use strict";a("838d")},"838d":function(t,e,a){}}]);
//# sourceMappingURL=chunk-a26b7884.d6138720.js.map