(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6b5e3df2"],{1276:function(t,i,e){"use strict";var n=e("d784"),a=e("44e7"),o=e("825a"),s=e("1d80"),c=e("4840"),r=e("8aa5"),u=e("50c4"),l=e("14c3"),d=e("9263"),h=e("9f7f"),f=h.UNSUPPORTED_Y,p=[].push,v=Math.min,g=4294967295;n("split",2,(function(t,i,e){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,e){var n=String(s(this)),o=void 0===e?g:e>>>0;if(0===o)return[];if(void 0===t)return[n];if(!a(t))return i.call(n,t,o);var c,r,u,l=[],h=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),f=0,v=new RegExp(t.source,h+"g");while(c=d.call(v,n)){if(r=v.lastIndex,r>f&&(l.push(n.slice(f,c.index)),c.length>1&&c.index<n.length&&p.apply(l,c.slice(1)),u=c[0].length,f=r,l.length>=o))break;v.lastIndex===c.index&&v.lastIndex++}return f===n.length?!u&&v.test("")||l.push(""):l.push(n.slice(f)),l.length>o?l.slice(0,o):l}:"0".split(void 0,0).length?function(t,e){return void 0===t&&0===e?[]:i.call(this,t,e)}:i,[function(i,e){var a=s(this),o=void 0==i?void 0:i[t];return void 0!==o?o.call(i,a,e):n.call(String(a),i,e)},function(t,a){var s=e(n,t,this,a,n!==i);if(s.done)return s.value;var d=o(t),h=String(this),p=c(d,RegExp),b=d.unicode,k=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(f?"g":"y"),m=new p(f?"^(?:"+d.source+")":d,k),C=void 0===a?g:a>>>0;if(0===C)return[];if(0===h.length)return null===l(m,h)?[h]:[];var x=0,_=0,S=[];while(_<h.length){m.lastIndex=f?0:_;var E,$=l(m,f?h.slice(_):h);if(null===$||(E=v(u(m.lastIndex+(f?_:0)),h.length))===x)_=r(h,_,b);else{if(S.push(h.slice(x,_)),S.length===C)return S;for(var y=1;y<=$.length-1;y++)if(S.push($[y]),S.length===C)return S;_=x=E}}return S.push(h.slice(x)),S}]}),f)},"159b":function(t,i,e){var n=e("da84"),a=e("fdbc"),o=e("17c2"),s=e("9112");for(var c in a){var r=n[c],u=r&&r.prototype;if(u&&u.forEach!==o)try{s(u,"forEach",o)}catch(l){u.forEach=o}}},"17c2":function(t,i,e){"use strict";var n=e("b727").forEach,a=e("a640"),o=a("forEach");t.exports=o?[].forEach:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}},"3e6e":function(t,i,e){"use strict";e("703b")},"703b":function(t,i,e){},a15b:function(t,i,e){"use strict";var n=e("23e7"),a=e("44ad"),o=e("fc6a"),s=e("a640"),c=[].join,r=a!=Object,u=s("join",",");n({target:"Array",proto:!0,forced:r||!u},{join:function(t){return c.call(o(this),void 0===t?",":t)}})},a640:function(t,i,e){"use strict";var n=e("d039");t.exports=function(t,i){var e=[][t];return!!e&&n((function(){e.call(null,i||function(){throw 1},1)}))}},c84b:function(t,i,e){"use strict";e.r(i);var n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"detail"},[e("van-nav-bar",{attrs:{title:"商品详情","left-text":"返回","left-arrow":"",fixed:""},on:{"click-left":t.back}}),e("div",{staticClass:"detail-box"},[e("div",{staticClass:"detail-img"},[e("img",{staticClass:"auto-img",attrs:{src:t.product.large_img,alt:""}})]),e("div",{staticClass:"detail-info"},[e("div",{staticClass:"d-pro-name"},[e("div",[e("div",{staticClass:"d-zhname"},[t._v(t._s(t.product.name))]),e("div",{staticClass:"d-enname"},[t._v(t._s(t.product.enname))])]),e("div",{staticClass:"d-price"},[t._v("¥"+t._s(t.product.price))])]),e("div",{staticClass:"d-rules"},t._l(t.product.rules,(function(i,n){return e("div",{key:n,staticClass:"d-rule"},[e("div",{staticClass:"d-rule-title"},[t._v(t._s(i.title))]),e("div",{staticClass:"d-rule-items"},t._l(i.subRule,(function(n,a){return e("div",{key:a,staticClass:"d-rule-item",class:{active:i.activeIndex===a},on:{click:function(e){return t.selectRule(i,a)}}},[t._v(" "+t._s(n.title)+" ")])})),0)])})),0),e("div",{staticClass:"select-count"},[e("div",{staticClass:"d-count-title"},[t._v("选择数量")]),e("div",{staticClass:"d-count"},[e("van-stepper",{attrs:{theme:"round","button-size":"22","disable-input":""},model:{value:t.count,callback:function(i){t.count=i},expression:"count"}})],1)]),e("div",{staticClass:"d-desc"},[e("div",{staticClass:"d-desc-title"},[t._v("商品描述")]),e("div",{staticClass:"d-desc-info"},t._l(t.product.desc,(function(i,n){return e("div",{key:n,staticClass:"d-desc-content"},[t._v(" "+t._s(n+1)+"、"+t._s(i)+" ")])})),0)])])]),e("van-goods-action",[e("van-goods-action-icon",{ref:"shopbag",attrs:{icon:"bag",badge:t.$root.publicShopbagCount,color:"#646566"},on:{click:function(i){return t.goPage("Shopbag")}}}),e("van-goods-action-icon",{attrs:{icon:"like",text:t.isLike?"已收藏":"未收藏",color:t.isLike?"#eb2403":"#646566"},on:{click:t.likeAndNotlike}}),e("van-goods-action-button",{attrs:{color:"#ccc",text:"加入购物袋"},on:{click:t.addShopbag}}),e("van-goods-action-button",{attrs:{color:"#eb2403",text:"立即购买"},on:{click:function(i){return t.toConfirm(t.pid)}}})],1)],1)},a=[],o=(e("ac1f"),e("1276"),e("159b"),e("a15b"),{name:"Detail",data:function(){return{count:1,pid:"",product:{},isLike:!1,shopbagCount:0,badgeNode:null}},created:function(){var t=this;this.pid=this.$route.params.pid,this.getProductByPid(this.pid),this.findUserLike(),""===this.$root.publicShopbagCount&&this.getShopbagCount(),this.$nextTick((function(){t.badgeNode=t.$refs.shopbag.$el.querySelector(".van-info")}))},methods:{back:function(){this.$router.go(-1)},toConfirm:function(t){console.log(t),this.$router.push({name:"ConfirmOrder",query:{pone:t}})},goPage:function(t){this.$router.push({name:t})},getProductByPid:function(t){var i=this;this.axios({method:"GET",url:"/productDetail",params:{pid:t}}).then((function(t){if(600===t.data.code){var e=t.data.result[0];e.desc=e.desc.split(/\n/);var n=["cream","milk","sugar","tem"],a=[];n.forEach((function(t){if(e[t]){var i={title:e["".concat(t,"_desc")],activeIndex:0,subRule:[]},n=e[t].split(/\//);n.forEach((function(t){i.subRule.push({title:t})})),a.push(i)}})),e.rules=a,i.product=e}})).catch((function(t){}))},findUserLike:function(){var t=this,i=this.$cookies.get("TOKEN");this.axios({method:"GET",url:"/findlike",params:{pid:this.pid,tokenString:i}}).then((function(i){1e3===i.data.code&&1===i.data.result.length&&(t.isLike=!0)})).catch((function(t){}))},likeAndNotlike:function(){var t=this,i="";i=this.isLike?"/notlike":"/like";var e=this.$cookies.get("TOKEN");this.axios({method:"POST",url:i,data:{pid:this.pid,tokenString:e}}).then((function(i){if(t.$toast(i.data.msg),700==i.data.code)return t.$toast("请先登录"),void setTimeout((function(){t.$router.push({name:"Login"})}),2e3);800===i.data.code?t.isLike=!0:900===i.data.code&&1===i.data.result&&(t.isLike=!1)})).catch((function(t){}))},selectRule:function(t,i){t.activeIndex!==i&&(t.activeIndex=i)},getShopbagCount:function(){var t=this,i=this.$cookies.get("TOKEN");this.axios({method:"GET",url:"/shopcartCount",params:{tokenString:i}}).then((function(i){4e3===i.data.code&&(t.$root.publicShopbagCount=i.data.result)})).catch((function(t){}))},addShopbag:function(){var t=this,i=this.product.rules,e=[];i.forEach((function(t){e.push(t.subRule[t.activeIndex].title)}));var n=this.$cookies.get("TOKEN");this.axios({method:"POST",url:"/addShopcart",data:{pid:this.pid,count:this.count,rule:e.join("/"),tokenString:n}}).then((function(i){t.$toast(i.data.msg),3e3===i.data.code&&(t.$root.publicShopbagCount+=t.count,t.badgeNode.className="van-info shake",setTimeout((function(){t.badgeNode.className="van-info"}),500))})).catch((function(t){}))}}}),s=o,c=(e("3e6e"),e("2877")),r=Object(c["a"])(s,n,a,!1,null,"e630ece0",null);i["default"]=r.exports}}]);
//# sourceMappingURL=chunk-6b5e3df2.4e43fa8c.js.map