(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-31ed02f8"],{"131c":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"safety-box"},[s("van-nav-bar",{attrs:{title:"安全中心","left-text":"返回","left-arrow":"",fixed:""},on:{"click-left":t.back}}),s("Bg",[s("div",{staticClass:"item",on:{click:t.isShow}},[s("div",{staticClass:"item-title"},[t._v("修改密码")]),s("van-icon",{attrs:{name:"arrow"}})],1),s("div",{staticClass:"item",on:{click:t.exit}},[s("div",{staticClass:"item-title"},[t._v("注销账号")]),s("van-icon",{attrs:{name:"arrow"}})],1),s("div",{staticClass:"btn-box"},[s("van-button",{attrs:{color:"#eb2403",size:"large",round:""},on:{click:t.toLogin}},[t._v("退出登录")])],1)]),s("van-popup",{attrs:{position:"bottom",closeable:""},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[s("div",{staticClass:"password-box"},[s("div",{staticClass:"txt"},[t._v("修改密码")]),s("van-form",[s("van-field",{attrs:{type:t.usernameOldStatus?"password":"text",name:"old",label:"旧密码",placeholder:"旧密码(首字母必须为字母)","right-icon":t.usernameOldStatus?"closed-eye":"eye-o",autocomplete:"off"},on:{"click-right-icon":function(e){return t.togglePassword("usernameOldStatus")}},model:{value:t.usernameOld.password,callback:function(e){t.$set(t.usernameOld,"password",e)},expression:"usernameOld.password"}}),s("van-field",{attrs:{type:t.usernameNewStatus?"password":"text",name:"new",label:"新密码",placeholder:"新密码(首字母必须为字母)","right-icon":t.usernameNewStatus?"closed-eye":"eye-o",autocomplete:"off"},on:{"click-right-icon":function(e){return t.togglePassword("usernameNewStatus")}},model:{value:t.usernameNew.password,callback:function(e){t.$set(t.usernameNew,"password",e)},expression:"usernameNew.password"}}),s("div",{staticStyle:{margin:"16px"}},[s("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"},on:{click:t.sub}},[t._v("提交")])],1)],1)],1)])],1)},o=[],n=s("30c7"),i={name:"Safety",components:{Bg:n["a"]},data:function(){return{show:!1,username:"",password:"",usernameOld:{password:""},usernameNew:{password:""},usernameOldStatus:!0,usernameNewStatus:!0}},methods:{back:function(){this.$router.go(-1)},toLogin:function(){var t=this,e=this.$cookies.get("TOKEN");this.axios({method:"POST",url:"/logout",data:{tokenString:e}}).then((function(e){console.log(e),"F001"===e.data.code&&(t.$toast(e.data.msg),setTimeout((function(){t.$router.push({name:"Login"})}),1e3))})).catch((function(t){}))},isShow:function(){this.show=!0},togglePassword:function(t){this[t]=!this[t]},exit:function(){var t=this;this.$dialog.confirm({title:"注销账号",message:"是否确定注销账号,一旦注销无法恢复!"}).then((function(){var e=t.$cookies.get("TOKEN");t.axios({method:"POST",url:"/destroyAccount",data:{tokenString:e}}).then((function(e){console.log(e),"G001"===e.data.code&&(t.$toast(e.data.msg),setTimeout((function(){t.$router.push({name:"Login"})}),1e3))})).catch((function(t){console.log(t)}))})).catch((function(t){console.log("err ==>",t)}))},sub:function(){var t=this;if(0!=this.usernameOld.password.length&&0!=this.usernameNew.password.length){var e=/^[A-Za-z][A-Za-z\d]{5,15}$/;if(e.test(this.usernameOld.password)){var s=this.usernameOld.password,a=this.usernameNew.password,o=this.$cookies.get("TOKEN");this.axios({method:"POST",url:"/updatePassword",data:{tokenString:o,password:a,oldPassword:s}}).then((function(e){console.log(e),"E001"===e.data.code&&(t.$toast(e.data.msg),setTimeout((function(){t.show=!1}),1e3))})).catch((function(t){}))}else this.$toast("密码支持字母数字组合")}else this.$toast("请输入内容")}}},c=i,r=(s("c309"),s("2877")),l=Object(r["a"])(c,a,o,!1,null,"557ecdfc",null);e["default"]=l.exports},"1c4c":function(t,e,s){},"30c7":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bg"},[s("div",{staticClass:"bg-box"}),s("div",{staticClass:"bg-content"},[t._t("default")],2)])},o=[],n={name:"Bg"},i=n,c=(s("fadd"),s("2877")),r=Object(c["a"])(i,a,o,!1,null,"41be0940",null);e["a"]=r.exports},6683:function(t,e,s){},c309:function(t,e,s){"use strict";s("6683")},fadd:function(t,e,s){"use strict";s("1c4c")}}]);
//# sourceMappingURL=chunk-31ed02f8.418e61e5.js.map