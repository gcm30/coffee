{"version":3,"sources":["webpack:///./node_modules/core-js/modules/web.dom-collections.for-each.js","webpack:///./node_modules/core-js/internals/array-for-each.js","webpack:///./src/views/Shopbag.vue?d40a","webpack:///src/views/Shopbag.vue","webpack:///./src/views/Shopbag.vue?66fd","webpack:///./src/views/Shopbag.vue","webpack:///./src/components/ProList.vue?bfba","webpack:///src/components/ProList.vue","webpack:///./src/components/ProList.vue?9458","webpack:///./src/components/ProList.vue","webpack:///./src/views/Shopbag.vue?32d6","webpack:///./node_modules/core-js/modules/es.array.join.js","webpack:///./node_modules/core-js/modules/es.array.splice.js","webpack:///./node_modules/core-js/internals/array-method-is-strict.js","webpack:///./src/components/ProList.vue?9faf"],"names":["global","DOMIterables","forEach","createNonEnumerableProperty","COLLECTION_NAME","Collection","CollectionPrototype","prototype","error","$forEach","arrayMethodIsStrict","STRICT_METHOD","module","exports","callbackfn","this","arguments","length","undefined","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","scopedSlots","_u","key","fn","shopbagData","on","edit","_v","_s","isEdit","_e","proxy","_l","item","sid","getSimpleSelectStatus","$event","removeOne","count","changeCount","model","value","callback","$$v","$set","expression","directives","name","rawName","total","submitOrder","allSelect","allCheck","removeSelect","staticRenderFns","components","ProList","data","created","getShopbagData","methods","axios","method","url","params","v","checked","sum","i","removeShopbagData","sids","push","JSON","stringify","$toast","price","component","isSlide","remove","simpleSelect","proData","small_img","rule","enname","_t","$","IndexedObject","toIndexedObject","nativeJoin","join","ES3_STRINGS","Object","target","proto","forced","separator","call","toAbsoluteIndex","toInteger","toLength","toObject","arraySpeciesCreate","createProperty","arrayMethodHasSpeciesSupport","HAS_SPECIES_SUPPORT","max","Math","min","MAX_SAFE_INTEGER","MAXIMUM_ALLOWED_LENGTH_EXCEEDED","splice","start","deleteCount","insertCount","actualDeleteCount","A","k","from","to","O","len","actualStart","argumentsLength","TypeError","fails","METHOD_NAME","argument"],"mappings":"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","file":"js/chunk-54b38e14.8052319a.js","sourcesContent":["var global = require('../internals/global');\nvar DOMIterables = require('../internals/dom-iterables');\nvar forEach = require('../internals/array-for-each');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\n\nfor (var COLLECTION_NAME in DOMIterables) {\n  var Collection = global[COLLECTION_NAME];\n  var CollectionPrototype = Collection && Collection.prototype;\n  // some Chrome versions have non-configurable methods on DOMTokenList\n  if (CollectionPrototype && CollectionPrototype.forEach !== forEach) try {\n    createNonEnumerableProperty(CollectionPrototype, 'forEach', forEach);\n  } catch (error) {\n    CollectionPrototype.forEach = forEach;\n  }\n}\n","'use strict';\nvar $forEach = require('../internals/array-iteration').forEach;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\n\nvar STRICT_METHOD = arrayMethodIsStrict('forEach');\n\n// `Array.prototype.forEach` method implementation\n// https://tc39.es/ecma262/#sec-array.prototype.foreach\nmodule.exports = !STRICT_METHOD ? function forEach(callbackfn /* , thisArg */) {\n  return $forEach(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n// eslint-disable-next-line es/no-array-prototype-foreach -- safe\n} : [].forEach;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"shopbag\"},[_c('van-nav-bar',{attrs:{\"title\":\"购物袋\",\"fixed\":\"\"},scopedSlots:_vm._u([{key:\"right\",fn:function(){return [(_vm.shopbagData.length >0)?_c('div',{on:{\"click\":_vm.edit}},[_vm._v(_vm._s(_vm.isEdit ? '完成' : '编辑'))]):_vm._e()]},proxy:true}])}),_c('div',{staticClass:\"shopbag-bg\"}),_c('div',_vm._l((_vm.shopbagData),function(item){return _c('div',{key:item.sid,staticClass:\"p-list-item\"},[_c('ProList',{attrs:{\"isSlide\":\"\",\"proData\":item},on:{\"simpleSelect\":_vm.getSimpleSelectStatus,\"remove\":function($event){return _vm.removeOne(item.sid,item.count)}}},[_c('van-stepper',{attrs:{\"theme\":\"round\",\"button-size\":\"22\",\"disable-input\":\"\"},on:{\"change\":function($event){return _vm.changeCount(item)}},model:{value:(item.count),callback:function ($$v) {_vm.$set(item, \"count\", $$v)},expression:\"item.count\"}})],1)],1)}),0),(_vm.shopbagData.length > 0)?_c('div',[_c('van-submit-bar',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isEdit),expression:\"!isEdit\"}],attrs:{\"price\":_vm.total,\"button-text\":\"提交订单\",\"button-color\":\"#eb2403\"},on:{\"submit\":_vm.submitOrder}},[_c('van-checkbox',{on:{\"click\":_vm.allSelect},model:{value:(_vm.allCheck),callback:function ($$v) {_vm.allCheck=$$v},expression:\"allCheck\"}},[_vm._v(\"全选\")])],1),_c('van-submit-bar',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isEdit),expression:\"isEdit\"}],attrs:{\"button-text\":\"删除选项\",\"button-color\":\"#e4393c\"},on:{\"submit\":_vm.removeSelect}},[_c('van-checkbox',{model:{value:(_vm.allCheck),callback:function ($$v) {_vm.allCheck=$$v},expression:\"allCheck\"}},[_vm._v(\"全选\")])],1)],1):_vm._e(),(_vm.shopbagData.length === 0)?_c('div',[_c('van-empty',{attrs:{\"description\":\"购物袋没有商品，赶紧逛一逛！\"}})],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"shopbag\">\r\n    <van-nav-bar title=\"购物袋\" fixed  >\r\n        <template #right>\r\n          <div v-if=\"shopbagData.length >0\" @click=\"edit\">{{isEdit ? '完成' : '编辑'}}</div>\r\n        </template>\r\n    </van-nav-bar>\r\n    <!-- 背景图片 -->\r\n    <div class=\"shopbag-bg\"></div>\r\n    <div>\r\n        <div class=\"p-list-item\" v-for=\"item in shopbagData\" :key=\"item.sid\">\r\n            <!-- 组件 -->\r\n            <ProList isSlide :proData=\"item\" @simpleSelect=\"getSimpleSelectStatus\" @remove=\"removeOne(item.sid,item.count)\"> \r\n                <!-- 插槽内容(slot) -->\r\n                <van-stepper @change=\"changeCount(item)\" v-model=\"item.count\" theme=\"round\" button-size=\"22\" disable-input />\r\n            </ProList>\r\n        </div>\r\n    </div>\r\n    <!-- 提交订单栏 -->\r\n    <div v-if=\"shopbagData.length > 0\">\r\n      <van-submit-bar v-show=\"!isEdit\" :price=\"total\" button-text=\"提交订单\" button-color=\"#eb2403\" @submit=\"submitOrder\">\r\n          <van-checkbox v-model=\"allCheck\" @click=\"allSelect\">全选</van-checkbox>\r\n      </van-submit-bar>\r\n      <van-submit-bar v-show=\"isEdit\" button-text=\"删除选项\" button-color=\"#e4393c\" @submit=\"removeSelect\">\r\n          <van-checkbox v-model=\"allCheck\">全选</van-checkbox>\r\n      </van-submit-bar>\r\n    </div>\r\n    <div v-if=\"shopbagData.length === 0\">\r\n        <van-empty description=\"购物袋没有商品，赶紧逛一逛！\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// 导入组件文件\r\nimport ProList from '../components/ProList.vue'\r\nexport default {\r\n  name: 'Shopbag',\r\n  // 注册组件\r\n  components:{\r\n    ProList\r\n  },\r\n  data(){\r\n    return{\r\n      allCheck: false,\r\n      isEdit: false,\r\n\r\n      shopbagData: [],\r\n\r\n      // 订单总价\r\n      total: 0\r\n    };\r\n  },\r\n  created(){\r\n    this.getShopbagData();\r\n  },\r\n  methods:{\r\n    edit(){\r\n      this.isEdit = !this.isEdit;\r\n    },\r\n    // 获取用户购物袋商品数据\r\n    getShopbagData(){\r\n      let tokenString = this.$cookies.get('TOKEN');\r\n      //发起请求\r\n      this.axios({\r\n        method: \"GET\",\r\n        url: \"/findAllShopcart\",\r\n        params:{\r\n            tokenString\r\n        }\r\n      })\r\n        .then((res) => {\r\n          \r\n          if (res.data.code == 700) {\r\n            //用户未登录, 拦截操作, 通知用户去登录\r\n            this.$toast('请先登录');\r\n            setTimeout(() => {\r\n              this.$router.push({name: 'Login'});\r\n            }, 2000)\r\n\r\n            return;\r\n          }\r\n          if(res.data.code === 5000){\r\n              // 添加一个单选状态属性\r\n              res.data.result.forEach(v =>{\r\n                  v.checked = false;\r\n              })\r\n\r\n              this.shopbagData = res.data.result;\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          \r\n        });\r\n    },\r\n      //全选\r\n    allSelect() {\r\n\r\n      this.shopbagData.forEach(v => {\r\n        v.checked = this.allCheck;\r\n      })\r\n    },\r\n\r\n    //获取单选的状态\r\n    getSimpleSelectStatus() {\r\n      // \r\n\r\n      this.sum();\r\n\r\n      for (let i = 0; i< this.shopbagData.length; i++) {\r\n        if (!this.shopbagData[i].checked) {\r\n          this.allCheck = false;\r\n          return;\r\n        }\r\n      }\r\n\r\n      this.allCheck = true;\r\n    },\r\n    // 修改数量\r\n    changeCount(item){\r\n      //获取token\r\n      let tokenString = this.$cookies.get('TOKEN');\r\n      this.axios({\r\n        method: \"POST\",\r\n        url: \"/modifyShopcartCount\",\r\n        data:{\r\n            tokenString,\r\n            sid: item.sid,\r\n            count: item.count\r\n        }\r\n      })\r\n        .then((res) => {\r\n          \r\n\r\n          if (res.data.code == 700) {\r\n            //用户未登录, 拦截操作, 通知用户去登录\r\n            this.$toast('请先登录');\r\n            setTimeout(() => {\r\n              this.$router.push({name: 'Login'});\r\n            }, 2000)\r\n\r\n            return;\r\n          }\r\n          if(res.data.code === 6000){\r\n              // 计算总价\r\n              this.sum();\r\n              let count = 0;\r\n              this.shopbagData.forEach(v =>{\r\n                count += v.count;\r\n              })\r\n              this.$root.publicShopbagCount = count;\r\n\r\n          }\r\n\r\n          // 计算数量\r\n          this.sum();\r\n        })\r\n        .catch((err) => {\r\n          \r\n        });\r\n    },\r\n    // 删除商品(单个删除和多个删除)\r\n    removeShopbagData(sids,count){\r\n        let tokenString = this.$cookies.get('TOKEN');\r\n        this.axios({\r\n          method: \"POST\",\r\n          url: \"/deleteShopcart\",\r\n          data:{\r\n              tokenString,\r\n              sids\r\n          }\r\n        })\r\n          .then((res) => {\r\n            \r\n\r\n            if (res.data.code == 700) {\r\n              //用户未登录, 拦截操作, 通知用户去登录\r\n              this.$toast('请先登录');\r\n              setTimeout(() => {\r\n                this.$router.push({name: 'Login'});\r\n              }, 2000)\r\n\r\n              return;\r\n            }\r\n            this.$toast(res.data.msg);\r\n            if(res.data.code === 7000){\r\n                let sidsData = JSON.parse(sids);\r\n                for(let i = 0; i < this.shopbagData.length; i++){\r\n                    let sid = this.shopbagData[i].sid;\r\n                    if(sidsData.indexOf(sid) > -1){\r\n                      this.shopbagData.splice(i,1);\r\n                      i--;\r\n                    }\r\n                }\r\n\r\n                // 需要重新判断是否全选\r\n                this.getSimpleSelectStatus();\r\n\r\n                // 计算数量\r\n                this.sum();\r\n\r\n                this.$root.publicShopbagCount -= count;\r\n            }\r\n          })\r\n          .catch((err) => {\r\n            \r\n          });\r\n    },\r\n    // 单个删除\r\n    removeOne(sid,count){\r\n        let sids = JSON.stringify([sid]);\r\n        \r\n        this.removeShopbagData(sids, count);\r\n    },\r\n    // 删除选择\r\n    removeSelect() {\r\n      //获取勾选的商品\r\n      let sids = [];\r\n      let count = 0;\r\n      this.shopbagData.forEach(v => {\r\n        if (v.checked) {\r\n          sids.push(v.sid);\r\n          count += v.count;\r\n        }\r\n      })\r\n\r\n      \r\n\r\n      if (sids.length === 0) {\r\n        this.$toast('请选择删除的商品');\r\n        return;\r\n      }\r\n      sids = JSON.stringify(sids);\r\n      this.removeShopbagData(sids, count);\r\n\r\n    },\r\n\r\n   //计算订单总金额\r\n    sum() {\r\n      let total = 0;\r\n      this.shopbagData.forEach(v => {\r\n\r\n        if (v.checked) {\r\n          total += v.count * v.price;\r\n        }\r\n        \r\n      })\r\n\r\n      \r\n      this.total = total * 100;\r\n    },\r\n    // 提交订单\r\n    submitOrder(){\r\n        // 获取提交的商品\r\n        let sids = [];\r\n        this.shopbagData.forEach(v =>{\r\n          if(v.checked){\r\n            sids.push(v.sid);\r\n          }\r\n        })\r\n        if(sids.length ==0){\r\n           this.$toast(\"请选择商品\");\r\n           return;\r\n        }\r\n        this.$router.push({name: 'ConfirmOrder', query: {sids: sids.join(\"-\")}});\r\n    }\r\n  }\r\n\r\n}\r\n</script>\r\n\r\n\r\n<style lang=\"less\" scoped>\r\n .shopbag{\r\n   padding-top: 46px;\r\n   padding-bottom: 60px;\r\n   /deep/ .van-nav-bar__text{\r\n     color: #eb2403;\r\n   }\r\n\r\n   /deep/ .van-submit-bar{\r\n     bottom: 50px;\r\n   }\r\n\r\n   /deep/ .van-submit-bar__button{\r\n     margin-left: auto;\r\n   }\r\n\r\n   /deep/ .van-checkbox__icon--checked .van-icon{\r\n     background-color: #eb2403;\r\n     border-color: #eb2403;\r\n   }\r\n\r\n   .p-list-item{\r\n     padding: 10px 10px 0;\r\n     border-radius: 10px;\r\n   }\r\n\r\n   .shopbag-bg{\r\n     height: 60px;\r\n     background: url(\"../assets/images/shopbag_bg.png\") no-repeat center center;\r\n     background-size: cover;\r\n   }\r\n\r\n     /deep/ .van-stepper--round .van-stepper__plus {\r\n    background-color: #eb2403;\r\n  }\r\n\r\n  /deep/ .van-stepper--round .van-stepper__minus {\r\n    color: #eb2403;\r\n    border-color: #eb2403;\r\n  }\r\n }\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Shopbag.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Shopbag.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Shopbag.vue?vue&type=template&id=50d97298&scoped=true&\"\nimport script from \"./Shopbag.vue?vue&type=script&lang=js&\"\nexport * from \"./Shopbag.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Shopbag.vue?vue&type=style&index=0&id=50d97298&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"50d97298\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"pro-list\"},[_c('van-swipe-cell',{attrs:{\"disabled\":!_vm.isSlide},scopedSlots:_vm._u([{key:\"right\",fn:function(){return [_c('van-button',{attrs:{\"square\":\"\",\"type\":\"danger\",\"text\":\"删除\"},on:{\"click\":_vm.remove}})]},proxy:true}])},[_c('div',{staticClass:\"pro-info\"},[(_vm.isHasCheckbox)?_c('div',{staticClass:\"pro-checkbox\"},[_c('van-checkbox',{attrs:{\"checked-color\":\"#eb2403\"},on:{\"change\":function($event){return _vm.simpleSelect(_vm.proData.checked)}},model:{value:(_vm.proData.checked),callback:function ($$v) {_vm.$set(_vm.proData, \"checked\", $$v)},expression:\"proData.checked\"}})],1):_vm._e(),_c('div',{staticClass:\"pro-img\"},[_c('img',{staticClass:\"auto-img\",attrs:{\"src\":_vm.proData.small_img,\"alt\":\"\"}})]),_c('div',{staticClass:\"pro-box\"},[_c('div',{staticClass:\"pro-name\"},[_c('div',{staticClass:\"pro-t1\"},[_c('div',{staticClass:\"pro-zhname\"},[_vm._v(_vm._s(_vm.proData.name))]),_c('div',{staticClass:\"pro-rule\"},[_vm._v(_vm._s(_vm.proData.rule))])]),_c('div',{staticClass:\"pro-enname\"},[_vm._v(_vm._s(_vm.proData.enname))])]),_c('div',{staticClass:\"pro-price\"},[_c('div',{staticClass:\"p-price\"},[_vm._v(\"¥\"+_vm._s(_vm.proData.price))]),_c('div',{staticClass:\"p-count\"},[_vm._t(\"default\")],2)])])])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n   <div class=\"pro-list\">\r\n       <!-- 滑动单元格 -->\r\n       <van-swipe-cell :disabled=\"!isSlide\">\r\n           <div class=\"pro-info\">\r\n               <div class=\"pro-checkbox\" v-if=\"isHasCheckbox\">\r\n                   <!-- 复选框 -->\r\n                   <van-checkbox v-model=\"proData.checked\" checked-color=\"#eb2403\" @change=\"simpleSelect(proData.checked)\" ></van-checkbox>\r\n               </div>\r\n               <div class=\"pro-img\">\r\n                   <img class=\"auto-img\" :src=\"proData.small_img\" alt=\"\">\r\n               </div>\r\n               <div class=\"pro-box\">\r\n                   <div class=\"pro-name\">\r\n                       <div class=\"pro-t1\">\r\n                           <div class=\"pro-zhname\">{{proData.name}}</div>\r\n                           <div class=\"pro-rule\">{{proData.rule}}</div>\r\n                       </div>\r\n                       <div class=\"pro-enname\">{{proData.enname}}</div>\r\n                   </div>\r\n                   <div class=\"pro-price\">\r\n                          <div class=\"p-price\">&yen;{{proData.price}}</div>\r\n                       <div class=\"p-count\">\r\n                           <!-- 自定义内容(插槽) -->\r\n                           <slot></slot>\r\n                       </div>\r\n                   </div>\r\n               </div>\r\n           </div>\r\n            <template #right>\r\n                <van-button @click=\"remove\" square type=\"danger\" text=\"删除\" />\r\n            </template>\r\n        </van-swipe-cell>\r\n   </div>\r\n\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        name: 'ProList',\r\n        // 自定义属性\r\n        props: {\r\n            proData: {\r\n                type: Object,\r\n                // 类型为对象,需要return\r\n                default(){\r\n                    return{};\r\n                }\r\n            },\r\n            // 是否滑动单元格\r\n            isSlide: {\r\n                type: Boolean,\r\n                default: false\r\n            },\r\n            // 是否显示复选框\r\n            isHasCheckbox:{\r\n                type: Boolean,\r\n                default: true\r\n            }\r\n        },\r\n        data(){\r\n            return{\r\n                checked:true\r\n            };\r\n        },\r\n        methods: {\r\n            // 单选\r\n            simpleSelect(){\r\n                this.$emit('simpleSelect');\r\n            },\r\n\r\n            // 删除商品\r\n            remove(){\r\n                this.$emit('remove');\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  .pro-list{\r\n    padding: 10px;\r\n    background-color: #fff;\r\n\r\n    /deep/ .van-swipe-cell__right .van-button--danger{\r\n      height: 100%;\r\n    }\r\n\r\n    .pro-price{\r\n      display: flex;\r\n      align-items: center;\r\n    }\r\n\r\n    .p-price{\r\n      margin-right: auto;\r\n      color: #e4393c;\r\n      font-size: 14px;\r\n      font-weight: bold;\r\n    }\r\n\r\n    .p-count{\r\n      margin-right: 10px;\r\n    }\r\n\r\n    .pro-t1{\r\n      display: flex;\r\n      align-items: center;\r\n    }\r\n\r\n    .pro-zhname{\r\n      font-size: 14px;\r\n      margin-right: 10px;\r\n    }\r\n\r\n    .pro-rule{\r\n      color: #999;\r\n    }\r\n\r\n    .pro-enname{\r\n      color: #999;\r\n    }\r\n\r\n    .pro-info{\r\n      display: flex;\r\n      align-items: center;\r\n    }\r\n    .pro-checkbox{\r\n      width: 20px;\r\n      height: 20px;\r\n      margin-right: 10px;\r\n    }\r\n\r\n    .pro-img{\r\n      width: 70px;\r\n      height: 70px;\r\n      background-color: #e8e8e8;\r\n      margin-right: 10px;\r\n    }\r\n\r\n    .pro-name,.pro-price{\r\n      height: 35px;\r\n    }\r\n\r\n    .pro-box{\r\n      flex: 1;\r\n    }\r\n  }\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ProList.vue?vue&type=template&id=33db6c7e&scoped=true&\"\nimport script from \"./ProList.vue?vue&type=script&lang=js&\"\nexport * from \"./ProList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ProList.vue?vue&type=style&index=0&id=33db6c7e&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"33db6c7e\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Shopbag.vue?vue&type=style&index=0&id=50d97298&lang=less&scoped=true&\"","'use strict';\nvar $ = require('../internals/export');\nvar IndexedObject = require('../internals/indexed-object');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\n\nvar nativeJoin = [].join;\n\nvar ES3_STRINGS = IndexedObject != Object;\nvar STRICT_METHOD = arrayMethodIsStrict('join', ',');\n\n// `Array.prototype.join` method\n// https://tc39.es/ecma262/#sec-array.prototype.join\n$({ target: 'Array', proto: true, forced: ES3_STRINGS || !STRICT_METHOD }, {\n  join: function join(separator) {\n    return nativeJoin.call(toIndexedObject(this), separator === undefined ? ',' : separator);\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toInteger = require('../internals/to-integer');\nvar toLength = require('../internals/to-length');\nvar toObject = require('../internals/to-object');\nvar arraySpeciesCreate = require('../internals/array-species-create');\nvar createProperty = require('../internals/create-property');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('splice');\n\nvar max = Math.max;\nvar min = Math.min;\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;\nvar MAXIMUM_ALLOWED_LENGTH_EXCEEDED = 'Maximum allowed length exceeded';\n\n// `Array.prototype.splice` method\n// https://tc39.es/ecma262/#sec-array.prototype.splice\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  splice: function splice(start, deleteCount /* , ...items */) {\n    var O = toObject(this);\n    var len = toLength(O.length);\n    var actualStart = toAbsoluteIndex(start, len);\n    var argumentsLength = arguments.length;\n    var insertCount, actualDeleteCount, A, k, from, to;\n    if (argumentsLength === 0) {\n      insertCount = actualDeleteCount = 0;\n    } else if (argumentsLength === 1) {\n      insertCount = 0;\n      actualDeleteCount = len - actualStart;\n    } else {\n      insertCount = argumentsLength - 2;\n      actualDeleteCount = min(max(toInteger(deleteCount), 0), len - actualStart);\n    }\n    if (len + insertCount - actualDeleteCount > MAX_SAFE_INTEGER) {\n      throw TypeError(MAXIMUM_ALLOWED_LENGTH_EXCEEDED);\n    }\n    A = arraySpeciesCreate(O, actualDeleteCount);\n    for (k = 0; k < actualDeleteCount; k++) {\n      from = actualStart + k;\n      if (from in O) createProperty(A, k, O[from]);\n    }\n    A.length = actualDeleteCount;\n    if (insertCount < actualDeleteCount) {\n      for (k = actualStart; k < len - actualDeleteCount; k++) {\n        from = k + actualDeleteCount;\n        to = k + insertCount;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n      for (k = len; k > len - actualDeleteCount + insertCount; k--) delete O[k - 1];\n    } else if (insertCount > actualDeleteCount) {\n      for (k = len - actualDeleteCount; k > actualStart; k--) {\n        from = k + actualDeleteCount - 1;\n        to = k + insertCount - 1;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n    }\n    for (k = 0; k < insertCount; k++) {\n      O[k + actualStart] = arguments[k + 2];\n    }\n    O.length = len - actualDeleteCount + insertCount;\n    return A;\n  }\n});\n","'use strict';\nvar fails = require('../internals/fails');\n\nmodule.exports = function (METHOD_NAME, argument) {\n  var method = [][METHOD_NAME];\n  return !!method && fails(function () {\n    // eslint-disable-next-line no-useless-call,no-throw-literal -- required for testing\n    method.call(null, argument || function () { throw 1; }, 1);\n  });\n};\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProList.vue?vue&type=style&index=0&id=33db6c7e&lang=less&scoped=true&\""],"sourceRoot":""}