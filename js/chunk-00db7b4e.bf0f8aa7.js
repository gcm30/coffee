(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-00db7b4e"],{"0bdd":function(t,e,s){},"13c0":function(t,e,s){"use strict";s("f754")},"97e6":function(t,e,s){"use strict";s("0bdd")},"9a0b":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"menu"},[t.isLoading?s("div",{staticClass:"skeleton-box"},[s("van-skeleton",{attrs:{row:1,"row-width":["100%"]}}),s("div",{staticClass:"skeleton-menu"},[s("div",{staticClass:"skeleton-menu-left"},[s("van-skeleton",{attrs:{row:3}}),s("div",{staticClass:"skeleton-item"},[s("van-skeleton",{attrs:{row:3}})],1),s("div",{staticClass:"skeleton-item"},[s("van-skeleton",{attrs:{row:3}})],1),s("div",{staticClass:"skeleton-item"},[s("van-skeleton",{attrs:{row:3}})],1)],1),s("div",{staticClass:"skeleton-menu-right"},[s("van-skeleton",{attrs:{row:5}}),s("div",{staticClass:"skeleton-item"},[s("van-skeleton",{attrs:{row:5}})],1),s("div",{staticClass:"skeleton-item"},[s("van-skeleton",{attrs:{row:5}})],1)],1)])],1):s("div",[s("div",{staticClass:"menu-search"},[s("van-search",{attrs:{placeholder:"输入商品名称",shape:"round"},on:{search:function(e){return t.search(t.msg)},input:function(e){return t.isShow(t.msg)}},model:{value:t.msg,callback:function(e){t.msg=e},expression:"msg"}})],1),s("div",{staticClass:"menu-box"},[s("div",{staticClass:"aside-menu"},t._l(t.typeData,(function(e,a){return s("div",{key:a,staticClass:"aside-menu-item",class:{active:t.activeIndex===a},on:{click:function(s){return t.toggleType(a,e.type)}}},[t._v(t._s(e.typeDesc))])})),0),s("div",{staticClass:"menu-content"},[s("div",{directives:[{name:"show",rawName:"v-show",value:0==t.isOpen,expression:"isOpen == 0"}],staticClass:"menu-product"},t._l(t.productData,(function(e,a){return s("div",{key:a,staticClass:"m-item",on:{click:function(s){return t.viewDetail(e.pid)}}},[s("Product",{attrs:{pro:e},scopedSlots:t._u([{key:"price",fn:function(){},proxy:!0}],null,!0)})],1)})),0),s("div",{directives:[{name:"show",rawName:"v-show",value:1==t.isOpen,expression:"isOpen == 1"}],staticClass:"search-content"},t._l(t.AllSearchData,(function(e,a){return s("div",{key:a,staticClass:"search-item",on:{click:function(s){return t.toDetail(e.pid)}}},[s("Product",{attrs:{pro:e}})],1)})),0),s("div",{directives:[{name:"show",rawName:"v-show",value:2==t.isOpen,expression:"isOpen == 2"}],staticClass:"empty"},[s("van-empty",{attrs:{description:"没有找到相关商品!"}})],1)])])])])},i=[],n=s("be6f"),o={name:"Menu",components:{Product:n["a"]},data:function(){return{isLoading:!0,activeIndex:0,typeData:[],productData:[],msg:"",isOpen:0,AllSearchData:[]}},created:function(){this.getTypeData()},methods:{toDetail:function(t){this.$router.push({name:"Detail",params:{pid:t}})},isShow:function(t){0==t.length&&(this.isOpen=0),console.log("没有内容")},search:function(t){var e=this;this.isOpen=!1,this.axios({method:"GET",url:"/search",params:{name:t}}).then((function(t){console.log("getSelectionData res==>",t),"Q001"===t.data.code&&0!=t.data.result.length?(e.AllSearchData=t.data.result,e.isOpen=1):"Q001"===t.data.code&&0==t.data.result.length&&(e.isOpen=2)})).catch((function(t){console.log(t)}))},getTypeData:function(){var t=this;this.axios({method:"GET",url:"/type"}).then((function(e){400===e.data.code&&(e.data.result.unshift({type:"isHot",typeDesc:"热卖推荐"}),t.typeData=e.data.result,t.getProductByType(e.data.result[t.activeIndex].type))})).catch((function(t){}))},toggleType:function(t,e){this.activeIndex!==t&&(this.activeIndex=t,this.getProductByType(e))},getProductByType:function(t){var e=this,s=localStorage.getItem("cacheProduct");s=s?JSON.parse(s):{};var a=(new Date).getTime();if(s.expires&&a-s.expires<6e5){if(s[t])return this.productData=s[t],void setTimeout((function(){e.isLoading=!1}),100)}else s={};var i="",n="";"isHot"===t?(i=t,n=1):(i="type",n=t),this.axios({method:"GET",url:"/typeProducts",params:{key:i,value:n}}).then((function(a){500===a.data.code&&(e.productData=a.data.result,e.isLoading=!1,s.expires||(s.expires=(new Date).getTime()),s[t]=a.data.result,localStorage.setItem("cacheProduct",JSON.stringify(s)))})).catch((function(t){}))},viewDetail:function(t){this.$router.push({name:"Detail",params:{pid:t}})}}},c=o,r=(s("13c0"),s("2877")),l=Object(r["a"])(c,a,i,!1,null,"117271e3",null);e["default"]=l.exports},be6f:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"product"},[s("div",{staticClass:"pro-img"},[t._t("hot"),s("img",{staticClass:"auto-img",attrs:{src:t.pro.smallImg,alt:""}})],2),s("div",{staticClass:"pro-zhname one-text"},[t._v(t._s(t.pro.name))]),s("div",{staticClass:"pro-enname one-text"},[t._v(t._s(t.pro.enname))]),s("div",{staticClass:"pro-price"},[t._v(" ¥"+t._s(t.pro.price)+" "),t._t("del")],2)])},i=[],n={name:"Product",props:{pro:{type:Object,default:function(){return{}}}}},o=n,c=(s("97e6"),s("2877")),r=Object(c["a"])(o,a,i,!1,null,"34ef951a",null);e["a"]=r.exports},f754:function(t,e,s){}}]);
//# sourceMappingURL=chunk-00db7b4e.bf0f8aa7.js.map